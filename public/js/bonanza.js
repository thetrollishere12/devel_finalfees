$(document).ready(function(){calculations();$('#main-calculator').children().keyup(function(){calculations()});$('button[name=p-reset]').click(function(){$('input[name=sold_price],input[name=shipping_charge],input[name=shipping_cost],input[name=item_cost],input[name=name]').val(null);$('input[name=item_tax]').val($('input[name=item_tax]').attr('id'));$('select[name=payment-method]').val(1);var value=$("select[name=payment-method]").find(":selected").text().split('+');$('input[name=percent]').val(parseFloat(value[0].replace("%","")));$('input[name=standard]').val(parseFloat(value[1].replace("$","")));calculations()})
$('button[name=p-edit]').click(function(){if($(this).text()=="Edit Fees"){$('.standard input').each(function(){$(this).prop("disabled",!1)});$('.standard').slideDown();$(this).text('Done Edit')}else{$('.standard input').each(function(){$(this).prop("disabled",!0)});$(this).text('Edit Fees');calculations();$('.standard').slideUp()}});$("select").change(function(){if($("select[name=payment-method]").val()=="other"){$('input[name=percent]').val(0);$('input[name=standard]').val(0)}else if($("select[name=payment-method]").val()!="2.9"){var value=$("select[name=payment-method]").find(":selected").text().split('+');$('input[name=percent]').val(parseFloat(value[0].replace("%","")));$('input[name=standard]').val(parseFloat(value[1].replace("$","")))}
calculations()});function calculations(){var options={  
useEasing:!0,  useGrouping:!0,  separator:',',  decimal:'.',};var advertising_fee=$("select[name=seller_ad]").val();var sold_price=parseFloat($('input[name=sold_price]').val()||0);var shipping_charge=parseFloat($('input[name=shipping_charge]').val()||0);var shipping_cost=parseFloat($('input[name=shipping_cost]').val()||0);var item_cost=parseFloat($('input[name=item_cost]').val()||0);var ad_cost=parseFloat($('input[name=ad_cost]').val()||0)
var percent=$('input[name=percent]').val()/100;var tax=parseFloat($('input[name=item_tax]').val()/100||0)
var flat_fee=0;var total=sold_price+shipping_charge;if(shipping_charge>10){shipping_charge_fov=shipping_charge-10}else{shipping_charge_fov=0}
var bonanza_fees=(sold_price+shipping_charge_fov)*advertising_fee;if(sold_price.toFixed(2)>0){flat_fee=parseFloat($('input[name=standard]').val()||0);if(bonanza_fees<=.50){bonanza_fees=.50}else{bonanza_fees=bonanza_fees}}
if(total>500){flat_extra_fee=((sold_price+shipping_charge_fov)-500)*.015
bonanza_fees=(500*advertising_fee)+flat_extra_fee}else{flat_extra_fee=0}
var processing_fees=total*percent+flat_fee;var costfees=item_cost+ad_cost+shipping_cost+bonanza_fees+processing_fees;var profit_number=(total-costfees).toFixed(2);if(profit_number<0){var tax=0}
var costfees=costfees+(profit_number*tax);if(costfees<0){costfees=0}
var profit_total=profit_number-(profit_number*tax);var return_total=(profit_total/costfees)*100||0;var margin_total=(profit_total/total)*100||0;if(profit_total<0){margin_total=0;return_total=0}
if(margin_total===Infinity||margin_total===-Infinity){margin_total=0}
if(return_total===Infinity||return_total===-Infinity){return_total=0}
profit_c(profit_total,return_total,margin_total);var other_fees=new CountUp('p-fees',0,processing_fees,2,.2,options);var main_tax=new CountUp('main-tax',0,profit_number*tax,2,.2,options);var main_fees=new CountUp('main-fees',0,bonanza_fees,2,.2,options);var main_return=new CountUp('main-return',0,return_total,2,.2,options);var main_margin=new CountUp('main-margin',0,margin_total,2,.2,options);var main_profit=new CountUp('main-profit',0,profit_total,2,.2,options);graph(sold_price,shipping_charge,shipping_cost,item_cost,main_tax.endVal,0,other_fees.endVal,main_fees.endVal,main_profit.endVal);if(!main_fees.error){main_fees.start();other_fees.start();main_return.start();main_margin.start();main_profit.start();main_tax.start()}else{  
console.error(main_fees.error)}}})