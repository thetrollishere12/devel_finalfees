$(document).ready(function(){calculations();$('#main-calculator').children().keyup(function(){calculations()});$('button[name=p-reset]').click(function(){$('input[name=sold_price],input[name=shipping_charge],input[name=shipping_cost],input[name=item_cost],input[name=name]').val(null);$('input[name=item_tax]').val($('input[name=item_tax]').attr('id'));$('input[type=checkbox]').prop('checked',!1);$('input[type=checkbox]').first().prop('checked',!0);$('input[name=percent]').val(2.9);$('input[name=standard]').val('.30');calculations()})
$("select[name=show]").change(function(){if($(this).val()=="hide"){$('.list_up_ctn').slideUp()}else if($(this).val()=="show"){$('.list_up_ctn').slideDown()}});$('button[name=p-edit]').click(function(){if($(this).text()=="Edit Fees"){$('.standard input').each(function(){$(this).prop("disabled",!1)});$('.standard').slideDown();$(this).text('Done Edit')}else{$('.standard input').each(function(){$(this).prop("disabled",!0)});$(this).text('Edit Fees');$('.standard').slideUp()}});$("select").change(function(){calculations()})
$("select[name=ebay_store]").change(function(){if($(this).val()=="yes"){$("#category-slide").slideDown()}else{$("#category-slide").slideUp()}});$('input:checkbox').change(function(){calculations()});$("input:checkbox:eq(2)").click(function(){double_upgrade()});$("input:checkbox:eq(9)").click(function(){disabled()});function double_upgrade(){if($("input:checkbox:eq(2)").is(":checked")){$('input:checkbox').each(function(){var value=(($(this).siblings('.double').text()).replace(/[^0-9\s]+/gi,'')*2)/100;console.log(value);$(this).siblings('.double').text("+ $"+value.toFixed(2))
$(this).siblings('.value').text("+ $"+value.toFixed(2)+" - Includes Gallery Plus, Scheduled Listing & Subtitle")})}else if($("input:checkbox:eq(2)").is(":not(:checked)")){$('input:checkbox').each(function(){var value=(($(this).siblings('.double').text()).replace(/[^0-9\s]+/gi,'')/2)/100;$(this).siblings('.double').text("+ $"+value.toFixed(2))
$(this).siblings('.value').text("+ $"+value.toFixed(2)+" - Includes Gallery Plus, Scheduled Listing & Subtitle")})}}
function disabled(){if($("input:checkbox:eq(9)").is(":checked")){$(".disabled").each(function(){$(this).prop('disabled',!0).prop('checked',!1).siblings('.upgrade-cost').addClass('grey').parent().addClass('grey')})}else if($("input:checkbox:eq(9)").is(":not(:checked)")){$(".disabled").each(function(){$(this).prop('disabled',!1).siblings('.upgrade-cost').removeClass('grey').parent().removeClass('grey')})}}
function calculations(){var options={  
useEasing:!0,  useGrouping:!0,  separator:',',  decimal:'.',};var total=0;var upgrade_fees=0;$('input:checkbox:checked').each(function(){total+=isNaN(parseFloat($(this).val()))?0:parseFloat($(this).val())});if($("#upgrade-double").is(':checked')){upgrade_fees=total*2}else{upgrade_fees=total}
var sold_price=parseFloat($('input[name=sold_price]').val()||0);var shipping_charge=parseFloat($('input[name=shipping_charge]').val()||0);var shipping_cost=parseFloat($('input[name=shipping_cost]').val()||0);var item_cost=parseFloat($('input[name=item_cost]').val()||0);var percent=$('input[name=percent]').val()/100;var tax=parseFloat($('input[name=item_tax]').val()/100||0)
var flat_fee=0;var ebay_standard_fee=0.1
var ebay_flat=.30;var total=sold_price+shipping_charge;if(total.toFixed(2)>0){flat_fee=parseFloat($('input[name=standard]').val()||0)}
if($("input:checkbox:eq(0)").is(":checked")){ebay_flat=0}else{ebay_flat=.30}
if($("select[name=t_r_seller]").val()=="no"){var ebay_standard_fee=ebay_standard_fee}else if($("select[name=t_r_seller]").val()=="yes"){var ebay_standard_fee=ebay_standard_fee*9/10}
if($("select[name=ebay_store]").val()=="yes"){var ebay_store_fee=$('select[name=category]').find(":selected").val();var combine_fees=parseFloat(((total)*ebay_standard_fee)*ebay_store_fee)}else{var combine_fees=parseFloat(((total)*ebay_standard_fee))}
var costfees=((total)*percent+flat_fee)+item_cost+shipping_cost+combine_fees+upgrade_fees+ebay_flat;if(costfees<0){costfees=0}
var profit_number=((total)-costfees).toFixed(2);if(profit_number<0){var tax=0}
var profit_total=profit_number-(profit_number*tax);var return_total=(profit_total/costfees)*100||0;var margin_total=(profit_total/total)*100||0;if(profit_total<0){margin_total=0;return_total=0}
if(margin_total===Infinity||margin_total===-Infinity){margin_total=0}
if(return_total===Infinity||return_total===-Infinity){return_total=0}
profit_c(profit_total,return_total,margin_total);var p_fees=new CountUp('p-fees',0,(sold_price+shipping_charge)*percent+flat_fee,2,.2,options);var other_fees=new CountUp('other-fees',0,upgrade_fees,2,.2,options);var main_tax=new CountUp('main-tax',0,profit_number*tax,2,.2,options);var main_fees=new CountUp('main-fees',0,combine_fees+ebay_flat,2,.2,options);var main_return=new CountUp('main-return',0,return_total,2,.2,options);var main_margin=new CountUp('main-margin',0,margin_total,2,.2,options);var main_profit=new CountUp('main-profit',0,profit_total,2,.2,options);graph(sold_price,shipping_charge,shipping_cost,item_cost,main_tax.endVal,p_fees.endVal,other_fees.endVal,main_fees.endVal,main_profit.endVal);if(!main_fees.error){p_fees.start();main_fees.start();main_return.start();main_margin.start();main_profit.start();other_fees.start()
main_tax.start()}else{  
console.error(main_fees.error)}}})